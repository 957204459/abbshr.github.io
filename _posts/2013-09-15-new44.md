---
layout: poslay
title: 谈谈Node.js
label: Node
kind: label-important
ptr:
mdmark:
metakey:
metades:
---

##关于Node的异步I/O模型
node.js的单线程就是主线程，也就是事件队列。当发生一个请求后，node.js只是在这个事件队列中注册一个事件，然后继续其他操作，而具体这个事件的执行就交给了操作系统的不同的进程，等os完成后，通过回调再回到主线程的处理，所以node.js单线程是指自己的主线程，而**不是所有的操作都是在这个线程里**，这个线程只是事件调度， **事件的执行都是交给操作系统在其它的线程中完成**。  
所以node.js**是非I/O阻塞** ， 而**不是非cpu阻塞**。那么node.js会出现cpu阻塞，是不是性能就会有问题呢？不是的，就象Nginx一样，因为对web而言运算是非常非常小的，一次I/O的操作的时间远大于做百万次的for循环！

##Node的优与劣
如今JavaScript应用铺天盖地，Node.js平台的出现，打破了JavaScript只能用在前端的诅咒，其优雅与高效着实吸引了不少人的青睐（包括我在内），但是再好的东西也有它的不足，Node也并不是什么都能胜任的，下面就分析一下Node的优与劣。

###适合使用 Node.js 的情况

1. 构建（软）实时社交应用程序，如 Twitter 或聊天应用程序。
2. 构建性能卓越、I/O 速度高的 TCP 应用程序，如代理服务器、PaaS、数据库等。
3. 构建后端日志记录和处理应用程序。
4. 构建与 vmc-tool 类似的绝佳 CLI 应用程序，以及诸如 ant 或 Make 之类的工具。
5. 在应用程序服务器前添加采用 REST 且基于 API 的 Web 服务器。

###不适合使用 Node.js 的情况

1. 它不适合任务关键型（硬）实时应用程序（如心跳监控应用程序）或需要占用大量 CPU 资源的应用程序。
2. 对于不具有任何实时或高性能需求的简单 CRUD 应用程序，Node.js 与其他语言相比并不能提供太大的优势。
3. 对于可能需要某些特定库的企业级应用程序，可能尚未有合适的 Node.js 库出现。（不过，可以构建一款支持多种语言的应用程序，从而将 Java 与 Node.js 结合使用来帮助构建库。）

###Node.js 的缺点
大多数缺点都是因为 Node.js 本身还相对较新：  
Node.js 库正在积极开发，更改率非常高。几乎每月都会有更新版本的库出现。这可能会造成版本问题和不稳定性。不久前已经推出了 Npm shrinkwrap 和 package.json 来建立标准，但此问题依然存在。  
仍有很多库（例如企业级应用程序需要的 SAML 身份验证库）尚未提供。  
Node.js 的回调、事件驱动、函数式编程等所有这些方面可能会增加采用其他面向对象的语言的服务器端程序员的学习负担。（请注意，有一些库可以帮助克服此困难。async 就是其中之一。此外，开发人员还可以使用可编译成 JavaScript 的 CoffeeScript 来帮助学习）。异步且由事件驱动的代码与同步代码相比，本身就会增加代码的复杂性。（说实话，其实我并不这么觉得！）
