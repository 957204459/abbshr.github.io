---
layout: poslay
title: 记录几个有用的正则代码
label: 开发随笔
kind: label-inverse
mdmark: 
metakey: SouFii的博客,Blog,node.js
metades: 
---

<tr>
<td>
<p>
今天的任务是fix bugs，把前几天累积的一些bug修正了，都是一些字符串的过滤不严谨问题，后果很严重……解决方案是使用RegExp，说实话，我对正则表达式部分不算熟练，关于正则的很多技巧不是忘了就是根本不知道，今天用的时候那叫一个头疼……百度一下，也算是学习了吧<br>
做个总结，这是今天用到的关键代码：
<pre>
//去除字符串首末空格
(function (str) {
    str = str.replace(/^(\s|\u00A0)+/,'');   
    for(var i = str.length-1; i >= 0; i--){   
        if(/\S/.test(str.charAt(i))){   
            str = str.substring(0, i+1);   
            break;   
        }   
    }   
    return str; 
})(str);

//清除所有空格和特殊字符
(function (str) {
	str = str.replace(/\#|\%|\&|\+|\-|\\|\/|\=|\^|\s/g, '');
	return str;
})(str);

//去除数组中重复和零宽字符元素
(function (arr) {
	for (var i = 0; i < arr.length; i++) {      //去除零宽字符
		if (!arr[i] && !arr[i].length) {
			arr.splice(i, 1);
			arr.length--;
			i--;
		}
	}
	arr = arr.join(",");
	arr = arr.match(/([^,]+)(?!.*,\1(,|$))/ig);   //去除重复
	return arr;
})(arr);
</pre>
</p>
</td>
</tr>　
